<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">











<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>HTTP Builder - URIBuilder</title>
    <style type="text/css" media="all">
      @import url("../css/maven-base.css");
      @import url("../css/maven-theme.css");
      @import url("../css/site.css");
    </style>
    <link rel="stylesheet" href="../css/print.css" type="text/css" media="print" />
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
      </head>
  <body class="composite">
    <div id="banner">
                  <a href="index.html" id="bannerLeft">
    
                                            <img src="../images/logo.png" alt="" />
    
            </a>
                        <a href="../../" id="bannerRight">
    
                                    <img src="http://media.xircles.codehaus.org/_projects/groovy/_logos/medium.png" alt="" />
    
            </a>
            <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
          
  

  
    
            
  
    
            <div class="xleft">
        Version: 0.5.0-SNAPSHOT
              </div>
            <div class="xright">      
  

  
    
            
  
    
             Last Published: 2009-06-15
            </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
           
  

  
    
            
  
    
                   <h5>Overview</h5>
            <ul>
              
    <li class="none">
                    <a href="../home.html">Home</a>
          </li>
              
    <li class="none">
                    <a href="../index.html">News</a>
          </li>
              
    <li class="none">
                    <a href="../download.html">Download</a>
          </li>
              
                
              
      
            
      
            
      
            
      
            
      
            
      
            
      
            
            
            
      
              
            <li class="expanded">
                    <a href="../doc/index.html">Documentation</a>
                  <ul>
                  
    <li class="none">
                    <a href="../doc/get.html">GET Examples</a>
          </li>
                  
    <li class="none">
                    <a href="../doc/post.html">POST Examples</a>
          </li>
                  
    <li class="none">
                    <a href="../doc/json.html">JSON</a>
          </li>
                  
    <li class="none">
                    <a href="../doc/xml.html">XML</a>
          </li>
                  
    <li class="none">
                    <a href="../doc/rest.html">RESTClient</a>
          </li>
                  
    <li class="none">
                    <a href="../doc/async.html">AsyncHTTPBuilder</a>
          </li>
                  
    <li class="none">
                    <a href="../doc/contentTypes.html">Content Types</a>
          </li>
                  
    <li class="none">
              <strong>URIBuilder</strong>
        </li>
                  
    <li class="none">
                    <a href="../doc/ssl.html">SSL</a>
          </li>
              </ul>
        </li>
              
    <li class="none">
                    <a href="../apidocs/index.html">JavaDoc</a>
          </li>
              
    <li class="none">
                    <a href="../changes.html">Changelog</a>
          </li>
              
    <li class="none">
                    <a href="http://twitter.com/httpbuilder" class="externalLink">Twitter!</a>
          </li>
              
    <li class="none">
                    <a href="../home.html#Support">Support</a>
          </li>
              
    <li class="none">
                    <a href="../about.html">About</a>
          </li>
          </ul>
              <h5>Additional Reference</h5>
            <ul>
              
    <li class="none">
                    <a href="../../../Documentation">Groovy</a>
          </li>
              
    <li class="none">
                    <a href="http://hc.apache.org/httpcomponents-client/" class="externalLink">HttpClient</a>
          </li>
              
    <li class="none">
                    <a href="http://hc.apache.org/httpcomponents-core/" class="externalLink">HttpCore</a>
          </li>
              
    <li class="none">
                    <a href="http://json-lib.sourceforge.net/" class="externalLink">JSON-Lib</a>
          </li>
              
    <li class="none">
                    <a href="http://nekohtml.sourceforge.net/" class="externalLink">NekoHTML</a>
          </li>
          </ul>
              <h5>Project Documentation</h5>
            <ul>
              
                
              
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
              
        <li class="collapsed">
                    <a href="../project-info.html">Project Information</a>
                </li>
              
                
              
      
            
      
            
      
            
      
            
      
            
      
              
        <li class="collapsed">
                    <a href="../project-reports.html">Project Reports</a>
                </li>
          </ul>
                                           <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
            <img alt="Built by Maven" src="../images/logos/maven-feather.png"></img>
          </a>
                       
  

  
    
            
  
    
        </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <p>The <a href="../apidocs/groovyx/net/http/URIBuilder.html">URIBuilder</a> class is extremely useful for URI and URL construction and manipulation. It is used within HTTPBuilder, but it is also useful even from plain Java code.</p>
<p>If you've ever attempted to change a URL relative to its current path, you've probably noticed that using <tt>URI.resolvePath(..)</tt> strips off everything after the last '/' of the URI, including any 'document,' query string and fragment. URIBuilder aims to make URI manipulation a <i>lot</i> easier and allows you to manipulate aspects of the URL while maintaining the other pieces:</p>
<div class="source"><pre>import groovyx.net.http.URIBuilder

def uri = new URIBuilder( 'http://www.google.com/one/two?a=1#frag' )

uri.scheme = 'https'
assert uri.toString() == 'https://www.google.com:80/one/two?a=1#frag'
                
uri.host = 'localhost'
assert uri.toString() == 'https://localhost:80/one/two?a=1#frag'

uri.port = 8080
assert uri.toString() == 'https://localhost:8080/one/two?a=1#frag'

uri.fragment = 'asdf2'
assert uri.toString() == 'https://localhost:8080/one/two?a=1#asdf2'

// relative paths:
uri.path = 'three/four.html'
assert uri.toString() == 'https://localhost:8080/one/three/four.html?a=1#asdf2'

uri.path = '../four/five'
assert uri.toString() == 'https://localhost:8080/one/four/five?a=1#asdf2'

// control the entire path with leading '/' :
uri.path = '/six'
assert uri.toString() == 'https://localhost:8080/six?a=1#asdf2'</pre>
</div>
<p>Query parameters can also be easily manipulated as a map:</p>
<div class="source"><pre>def uri = new groovyx.net.http.URIBuilder( 'http://localhost?a=1&amp;b=2' )
assert uri.query instanceof Map
assert uri.query.a == '1'
assert uri.query.b == '2'

uri.addQueryParam 'd', '4'
uri.removeQueryParam 'b'

assert uri.toString() == 'http://localhost?d=4&amp;a=1'

uri.query = [z:0,y:9,x:8]
assert uri.toString() == 'http://localhost?z=0&amp;y=9&amp;x=8'
                
uri.query = null
assert uri.toString() == 'http://localhost'


// parameters are also properly escaped as well:

uri.query = [q:'a:b',z:'war &amp; peace']
assert uri.toString() == 'http://localhost?q=a%3Ab&amp;z=war+%26+peace'</pre>
</div>
<p>As mentioned above, URIBuilder is also useful from Java. This is because URIBuilder's setter methods return the modified builder instance, to allow for the 'fluent interface' pattern. The above example could be written in Java as follows:</p>
<div class="source"><pre>URIBuilder uri = new URIBuilder( &quot;http://www.google.com/one/two?a=1#frag&quot; );

uri.setScheme( &quot;https&quot; ).setHost( &quot;localhost&quot; ).setPath( &quot;../three&quot; );
assert uri.toString().equals( &quot;https://localhost/three?a=1#frag&quot; );</pre>
</div>
<p>URIBuilder also has methods for coercion to a URI or URL instance. Since URIBuilder is mutable, it generally should <b>not</b> be used for things like map keys. In this case, the builder's current state should be frozen by coercing it to a URI or URL. </p>

      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">&#169;  
          2008-2009
    
          
  

  
    
            
  
    
  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
